<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Kepforannas Repot</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
  
  :root {
    --primary-color: #6a11cb;
    --secondary-color: #2575fc;
    --card-bg: rgba(255, 255, 255, 0.1);
    --input-bg: rgba(255, 255, 255, 0.2);
    --border-color: rgba(255, 255, 255, 0.3);
    --text-color: #e0e0e0;
    --log-bg: rgba(0, 0, 0, 0.5);
    --log-text: #00ff6a;
    --success-color: #00ff6a;
    --error-color: #ff3b5b;
    --warning-color: #ffc107;
    --primary-btn-hover: #4d0a9b;
  }
  
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: 'Inter', sans-serif;
  }
  
  body {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: var(--text-color);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    overflow-y: auto;
    animation: backgroundMove 20s infinite alternate;
  }
  
  @keyframes backgroundMove {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
  }
  
  .dashboard-container {
    width: 100%;
    max-width: 550px;
    background: var(--card-bg);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
    border: 1px solid var(--border-color);
    animation: fadeIn 1s ease-in-out;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .header {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 20px;
  }
  
  .logo {
    font-size: 3rem;
    filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.7));
    margin-bottom: 10px;
    animation: bounceIn 1s ease-in-out;
  }
  
  @keyframes bounceIn {
    0% { transform: scale(0); opacity: 0; }
    60% { transform: scale(1.1); opacity: 1; }
    80% { transform: scale(0.9); }
    100% { transform: scale(1); }
  }
  
  h1 {
    font-size: 2rem;
    text-align: center;
    color: #fff;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
  }
  
  h2 {
    font-size: 1rem;
    text-align: center;
    margin-top: 5px;
    color: rgba(255, 255, 255, 0.7);
  }
  
  .section {
    margin-bottom: 25px;
    position: relative;
  }
  
  .section-title {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 15px;
    padding-bottom: 5px;
    border-bottom: 2px solid var(--border-color);
    color: #fff;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .section-title svg {
    filter: drop-shadow(0 0 5px rgba(255,255,255,0.2));
  }
  
  label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.9);
  }
  
  input, button {
    width: 100%;
    padding: 12px;
    margin-top: 6px;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    font-size: 16px;
    background: var(--input-bg);
    color: var(--text-color);
    transition: all 0.3s ease;
  }
  
  input::placeholder {
    color: rgba(255, 255, 255, 0.6);
  }
  
  input:focus {
    background: rgba(255, 255, 255, 0.3);
    border-color: #fff;
    outline: none;
    box-shadow: 0 0 15px rgba(37, 117, 252, 0.5);
  }
  
  button {
    cursor: pointer;
    background: linear-gradient(90deg, var(--secondary-color), var(--primary-color));
    border: none;
    font-weight: 700;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    animation: shine 2.5s infinite;
  }
  
  button:hover {
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    box-shadow: 0 6px 25px rgba(0,0,0,0.4);
    transform: translateY(-3px);
  }
  
  @keyframes shine {
    0% { filter: brightness(1); }
    50% { filter: brightness(1.2); }
    100% { filter: brightness(1); }
  }
  
  .status-info {
    margin-top: 15px;
    text-align: center;
    font-weight: 700;
    padding: 15px;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    transition: all 0.5s ease;
    animation: popIn 0.5s ease-out;
  }
  
  .status-info.connected { 
    background: rgba(0, 255, 106, 0.2);
    color: var(--success-color); 
    border-color: var(--success-color);
  }
  .status-info.disconnected { 
    background: rgba(255, 59, 91, 0.2);
    color: var(--error-color); 
    border-color: var(--error-color);
  }
  .status-info.connecting { 
    background: rgba(255, 193, 7, 0.2);
    color: var(--warning-color); 
    border-color: var(--warning-color);
  }
  @keyframes popIn {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }
  
  .log-container {
    margin-top: 30px;
  }
  
  #logArea {
    width: 100%;
    height: 200px;
    background: var(--log-bg);
    color: var(--log-text);
    font-family: 'Courier New', monospace;
    padding: 15px;
    border-radius: 10px;
    resize: none;
    border: 1px solid rgba(0, 255, 106, 0.2);
    transition: all 0.3s ease;
  }
  
  .result-message {
    margin-top: 15px;
    text-align: center;
    font-weight: 600;
    color: var(--text-color);
    animation: slideIn 0.5s ease-out;
  }
  
  @keyframes slideIn {
    from { transform: translateY(10px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }
  
  .divider {
    border: none;
    height: 1px;
    background: var(--border-color);
    margin: 30px 0;
  }

  .info-panel-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
  }

  .info-panel {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  
  .info-panel:hover {
    transform: translateY(-5px) scale(1.03);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
  }
  
  .info-panel-icon {
    font-size: 2.5rem;
    margin-bottom: 10px;
    transition: transform 0.3s ease;
    color: var(--text-color);
  }
  
  .info-panel:hover .info-panel-icon {
    transform: rotateY(360deg);
  }
  
  .info-panel h3 {
    font-size: 1.1rem;
    font-weight: 600;
  }
  
  .info-panel p {
    font-size: 1.5rem;
    font-weight: 700;
    margin-top: 5px;
    color: #fff;
  }

  @media (max-width: 600px) {
    .dashboard-container {
      padding: 20px;
    }
  }
</style>
</head>
<body>
  <div class="dashboard-container">
    <div class="header">
      <div class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="currentColor" style="color: #25D366;">
          <path d="M12.04 2.87c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.45 1.32 4.95l-1.39 5.06 5.21-1.37c1.47.8 3.16 1.25 4.77 1.25 5.46 0 9.91-4.45 9.91-9.91s-4.45-9.91-9.91-9.91zM17.43 15.68c-.14.24-.29.27-.47.45-.18.18-.36.2-.55.12-.2-.08-.55-.22-1.07-.47-.52-.26-.88-.39-1.24-.48-.36-.08-.75-.08-1.12.08-.37.17-.47.28-.6.45-.14.17-.28.36-.4.49-.12.14-.26.29-.44.36-.18.08-.4.04-.6-.08-.2-.12-.47-.29-.73-.42-.26-.14-.52-.27-.7-.41-.18-.14-.37-.34-.52-.51-.14-.17-.27-.37-.36-.55-.08-.18-.12-.34-.12-.45-.04-.12-.04-.2-.04-.29 0-.09-.04-.17-.04-.25s0-.18.04-.24.12-.22.25-.37.28-.32.42-.48.3-.34.39-.55c.08-.2.12-.36.12-.55.04-.19 0-.32-.1-.45s-.37-.25-.6-.5c-.24-.22-.52-.3-.68-.3-.16 0-.36-.04-.52-.04-.16 0-.37 0-.57.08-.2.08-.47.22-.7.42s-.34.45-.45.69-.17.5-.17.7-.02.39 0 .6.12.51.27.76.36.42.52.54.43.34.69.45.6.25 1.2.49c.5.21 1.05.42 1.58.62.53.2 1.05.37 1.55.51.5.15 1.05.27 1.55.33.5.06 1.05.02 1.55-.17.5-.19.87-.51 1.07-.8.2-.29.3-.58.33-.87.03-.29-.08-.58-.19-.77z"/>
        </svg>
      </div>
      <h1>Kepforannas Repot</h1>
      <h2>Dashboard Bot WhatsApp</h2>
    </div>
    
    <div class="section">
      <div class="section-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>
        Status Bot
      </div>
      <p id="status" class="status-info disconnected">Status: Terputus</p>
    </div>

    <div class="divider"></div>

    <div class="section">
      <div class="section-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-triangle"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12" y2="17"></line></svg>
        Kirim Report & Blokir
      </div>
      <label for="targetNumber">Nomor Target (contoh: 6289876543210)</label>
      <input id="targetNumber" placeholder="Masukkan nomor target" />

      <label for="reportTimes">Jumlah Report</label>
      <input id="reportTimes" type="number" min="1" max="50" value="5" />

      <button id="btnReport">Kirim Report & Blokir</button>
      <p id="reportResult" class="result-message"></p>
    </div>

    <div class="divider"></div>

    <div class="section">
      <div class="section-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path></svg>
        Status Keren
      </div>
      <div class="info-panel-container">
        <div class="info-panel">
          <svg class="info-panel-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 17H2a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2zM4 17V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14M8 10h8m-8-4h8"></path></svg>
          <h3>CPU Load</h3>
          <p id="cpuLoad">0.0%</p>
        </div>
        <div class="info-panel">
          <svg class="info-panel-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8zm-2-12a1 1 0 1 1 1 1 1 1 0 0 1-1-1zM10 10a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm4-4a1 1 0 1 1 1 1 1 1 0 0 1-1-1zM14 10a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm-4 4a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm4 4a1 1 0 1 1 1 1 1 1 0 0 1-1-1zM18 10a1 1 0 1 1 1 1 1 1 0 0 1-1-1zM10 18a1 1 0 1 1 1 1 1 1 0 0 1-1-1z"></path></svg>
          <h3>Uptime</h3>
          <p id="uptime">0h 0m 0s</p>
        </div>
        <div class="info-panel">
          <svg class="info-panel-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15V8a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z"></path><path d="M7 11v1a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1"></path></svg>
          <h3>Memory</h3>
          <p id="memory">0 MiB</p>
        </div>
        <div class="info-panel">
          <svg class="info-panel-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 15v-2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2m-6 0v-2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2m-6 0v-2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2m-6-10v-2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2m-6 0v-2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2m-6 0v-2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2m-6 0v-2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2"></path></svg>
          <h3>Disk</h3>
          <p id="disk">0 MiB</p>
        </div>
      </div>
    </div>
    
    <div class="divider"></div>

    <div class="log-container">
      <div class="section-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-terminal"><polyline points="4 17 10 17 10 21"></polyline><line x1="4" y1="4" x2="20" y2="4"></line><line x1="4" y1="8" x2="20" y2="8"></line><line x1="4" y1="12" x2="20" y2="12"></line><polyline points="12 19 14 21 18 17"></polyline></svg>
        Log Aktivitas
      </div>
      <textarea id="logArea" readonly></textarea>
    </div>
  </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.js"></script>
<script>
  const serverUrl = "http://localhost:3000";
  const socket = io(serverUrl);
  
  const statusP = document.getElementById('status');
  const logArea = document.getElementById('logArea');
  const targetNumberInput = document.getElementById('targetNumber');
  const reportTimesInput = document.getElementById('reportTimes');
  const btnReport = document.getElementById('btnReport');
  const reportResultP = document.getElementById('reportResult');
  const cpuLoadP = document.getElementById('cpuLoad');
  const uptimeP = document.getElementById('uptime');
  const memoryP = document.getElementById('memory');
  const diskP = document.getElementById('disk');
  
  function updateStatus(status, connected = false) {
    statusP.textContent = `Status: ${status}`;
    statusP.className = 'status-info';
    if (connected) {
      statusP.classList.add('connected');
    } else {
      statusP.classList.add('disconnected');
    }
    if (status === 'Connecting...' || status === 'Reconnecting...') {
      statusP.classList.add('connecting');
    }
  }

  socket.on('status', ({ status, connected }) => {
    updateStatus(status, connected);
  });

  socket.on('log', (msg) => {
    logArea.value += new Date().toLocaleTimeString() + ': ' + msg + '\n';
    logArea.scrollTop = logArea.scrollHeight;
  });

  socket.on('system-status', (data) => {
    cpuLoadP.textContent = `${data.cpuLoad}%`;
    uptimeP.textContent = data.uptime;
    memoryP.textContent = data.memory;
    diskP.textContent = data.disk;
  });

  btnReport.onclick = async () => {
    const targetNumber = targetNumberInput.value.trim();
    const times = parseInt(reportTimesInput.value);
    const botNumber = "62851639390215"; // Ganti dengan nomor bot yang Anda gunakan di backend
    if (!targetNumber || !times || times <= 0) {
      alert('Isi semua field dengan benar!');
      return;
    }
    
    reportResultP.textContent = 'Mengirim report dan memblokir...';
    try {
      const res = await fetch(`${serverUrl}/report-and-block`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ botNumber, targetNumber, times }),
      });
      const data = await res.json();
      if (data.success) {
        reportResultP.textContent = data.message;
      } else {
        reportResultP.textContent = `Error: ${data.error || 'Tidak diketahui'}`;
      }
    } catch (e) {
      reportResultP.textContent = `Error jaringan: ${e.message}`;
    }
  };
</script>
</body>
</html>